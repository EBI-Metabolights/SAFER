source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
scattermore::scatter_points_rgbwt(xy = df.feats,
xlim = c(max(df.feats[, 1]), min(df.feats[, 1])),
pointsize = plt.pars$pointsize,
out_size = plt.pars$pixels)
scatter_points_rgbwt(xy = df.feats,
xlim = c(max(df.feats[, 1]), min(df.feats[, 1])),
pointsize = plt.pars$pointsize,
out_size = plt.pars$pixels)
library(scattermore)
scatter_points_rgbwt(xy = df.feats,
xlim = c(max(df.feats[, 1]), min(df.feats[, 1])),
pointsize = plt.pars$pointsize,
out_size = plt.pars$pixels)
scattermore::scattermore(xy = df.feats,
xlim = c(max(df.feats[, 1]), min(df.feats[, 1]))
)
c(max(df.feats[, 1]), min(df.feats[, 1]))
scattermore(
xy = df.feats,
xlim = c(max(df.feats[, 1]), min(df.feats[, 1]))
)
scattermore::scattermoreplot(
x = df.feats[,1],
y = df.feats[,2],
xlab = 'ppm',
ylab = '',
xlim = c(max(df.feats[, 1]), min(df.feats[, 1]))
)
df.lines <- data.frame(ppm = ppm[cols.x],
int = xs %>% t %>% c,
type = 'spec') %>% na.omit
# outlines
df.feats <- data.frame(ppm = ppm[cols.x],
int = f.stack %>% t %>% c,
type = 'feat') %>% na.omit
df.lines <- data.frame(ppm = ppm[cols.x],
int = xs %>% t %>% c,
color = alpha('black', alpha = 1)) %>% na.omit
# outlines
df.feats <- data.frame(ppm = ppm[cols.x],
int = f.stack %>% t %>% c,
color = alpha('blue', alpha = 5)) %>% na.omit
df <- rbind(df.lines, df.feats)
scattermore::scattermoreplot(df
x = df$ppm,
scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
color = df$color
)
scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = df$color
)
ggplot() +
scattermore::geom_scattermost(xy = df.lines,
interpolate = plt.pars$interpolate,
pointsize = plt.pars$pointsize,
pixels = plt.pars$pixels) +
theme_clean_nmr()
scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = df$color,
pch = '-'
)
scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = df$color,
pch = '|'
)
scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = df$color,
pch = '|'
)
scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = df$color,
pch = 0
)
g <- scattermore::scattermoreplot(
x = df$ppm,
y = df$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = df$color
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
cex = 1,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
cex = 1,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
cex = .5,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .5,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .5,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
ppm[cols.x]
axis(1, c(max(df$ppm), min(df$ppm)), col = NA, col.ticks = 1)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black'
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .5,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
-c(vshift*0.1:.5)
vshift
(vshift*(0.1:.5))
vshift*(0.1:.5)
0.1:.5
vshift
vshift*(1:5)/10
int = outer(df.feats$int, -vshift*(1:5)/10)
dim(int)
df.feats.exp <- data.frame(ppm = df.feats$ppm,
int = outer(df.feats$int, -vshift*(1:5)/10),
df.feats$color)
View(df.feats.exp)
df.feats.exp <- data.frame(ppm = df.feats$ppm,
int = outer(df.feats$int, -vshift*(1:5)/10) %>% c,
df.feats$color)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats$ppm,
y = df.feats$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .5,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .5,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = 'blue'
)
df.feats.exp <- data.frame(ppm = df.feats$ppm,
int = outer(df.feats$int, vshift*(1:5)/10, '-') %>% c,
df.feats$color)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .5,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = 1,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = 'blue'
)
df.feats.exp <- data.frame(ppm = df.feats$ppm,
int = outer(df.feats$int, vshift*(-5:5)/10, '-') %>% c,
df.feats$color)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = 1,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = 0,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = 'blue'
)
seq(-10,10,by = 2)
df.feats.exp <- data.frame(ppm = df.feats$ppm,
int = outer(df.feats$int, vshift*(seq(-10,10,by = 2))/10, '-') %>% c,
df.feats$color)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = 0,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = 'blue'
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = 0,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = alpha('blue', alpha = .5)
)
scattermore::scattermoreplot(
x = df.lines$ppm,
y = df.lines$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = .0,
xlim = c(max(df$ppm), min(df$ppm)),
col = 'black',
)
par(new=TRUE)
scattermore::scattermoreplot(
x = df.feats.exp$ppm,
y = df.feats.exp$int,
xlab = 'ppm',
ylab = '',
size = plt.pars$pixels,
cex = 0,
xlim = c(max(df.lines$ppm), min(df.lines$ppm)),
col = alpha('blue', alpha = .3)
)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
fastStack.withFeatures(xmat, ppm, raster = T, bfs = bfs, plt.pars)
devtools::document()
show.me.the.evidence(results.dir = '/Users/mjudge/Documents/current_run')
rm(list = c("fastStack"))
devtools::document()
show.me.the.evidence(results.dir = '/Users/mjudge/Documents/current_run')
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
source("~/Documents/GitHub/icl_nmr_R/R/fastStack.R")
show.me.the.evidence(results.dir = '/Users/mjudge/Documents/current_run')
devtools::document()
rm(list = c("fastStack"))
devtools::document()
show.me.the.evidence(results.dir = '/Users/mjudge/Documents/current_run')
setwd('/Users/mjudge/Documents/GitHub/icl_nmr_R')
devtools::document()
run_params <- '/Users/mjudge/Documents/current_run/params.yaml'
pars <- yaml::yaml.load_file(run_params, eval.expr = TRUE)
